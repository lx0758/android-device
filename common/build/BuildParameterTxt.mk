ifeq ($(BOARD_BUILD_PARMETERS_TXT), true)

PARAMETER_TEMPLATE ?= device/6xyun/common/parameter_tools/parameter.in

$(info build parameter.txt with $(PARAMETER_TEMPLATE)...)

PARAMETER_START_OFFSET := 64
PARAMETER_FIRMWARE_VERSION := $(PLATFORM_VERSION_LAST_STABLE).0
PARAMETER_PARTITION_LIST := idbloader:8160K,uboot:4M,vbmeta:4M,misc:4M
PARAMETER_PARTITION_LIST := $(PARAMETER_PARTITION_LIST),dtbo:$(BOARD_DTBOIMG_PARTITION_SIZE)
PARAMETER_PARTITION_LIST := $(PARAMETER_PARTITION_LIST),boot:$(BOARD_BOOTIMAGE_PARTITION_SIZE),vendor_boot:$(BOARD_VENDOR_BOOTIMAGE_PARTITION_SIZE)
PARAMETER_PARTITION_LIST := $(PARAMETER_PARTITION_LIST),cache:$(BOARD_CACHEIMAGE_PARTITION_SIZE),super:$(BOARD_SUPER_PARTITION_SIZE)

PARAMETER_TXT := $(PRODUCT_OUT)/parameter.txt
PARAMETER_TOOLS := $(SOONG_HOST_OUT_EXECUTABLES)/parameter_tools

$(PARAMETER_TXT): $(PARAMETER_TEMPLATE) $(PARAMETER_TOOLS)
	@echo "Building parameter.txt $@."
	$(PARAMETER_TOOLS) \
	--input $(PARAMETER_TEMPLATE) \
	--start-offset $(PARAMETER_START_OFFSET) \
	--firmware-version $(PARAMETER_FIRMWARE_VERSION) \
	--machine-model $(PRODUCT_MODEL) \
	--manufacturer $(PRODUCT_MANUFACTURER) \
	--machine $(PRODUCT_DEVICE) \
	--partition-list $(PARAMETER_PARTITION_LIST) \
	--output $@

include $(CLEAR_VARS)
LOCAL_MODULE := parameter.txt
LOCAL_LICENSE_KINDS := legacy_notice
LOCAL_LICENSE_CONDITIONS := notice
LOCAL_ADDITIONAL_DEPENDENCIES := $(PARAMETER_TXT)
include $(BUILD_PHONY_PACKAGE)

droidcore: parameter.txt

endif